(()=>{"use strict";var e={56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},o=[],s=0;s<e.length;s++){var c=e[s],d=r.base?c[0]+r.base:c[0],l=i[d]||0,m="".concat(d," ").concat(l);i[d]=l+1;var h=t(m),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)n[h].references++,n[h].updater(p);else{var u=a(p,r);r.byIndex=s,n.splice(s,0,{identifier:m,updater:u,references:1})}o.push(m)}return o}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=t(i[o]);n[s].references--}for(var c=r(e,a),d=0;d<i.length;d++){var l=t(i[d]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}i=c}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);r&&o[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),n.push(l))}},n}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,a&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},919:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(601),a=t.n(r),i=t(314),o=t.n(i)()(a());o.push([e.id,"/* WeatherModel App Styles */\n\n/* Variables */\n:root {\n  --primary-color: #3498db;\n  --primary-dark: #2980b9;\n  --secondary-color: #2ecc71;\n  --secondary-dark: #27ae60;\n  --background-color: #f8fafc;\n  --card-color: #ffffff;\n  --text-color: #2d3748;\n  --text-light: #718096;\n  --divider-color: #e2e8f0;\n  --danger-color: #e53e3e;\n  --gray-50: #f8fafc;\n  --gray-100: #f1f5f9;\n  --gray-200: #e2e8f0;\n  --gray-300: #cbd5e1;\n  --gray-400: #94a3b8;\n  --gray-500: #64748b;\n  --gray-600: #475569;\n  --gray-700: #334155;\n  --gray-800: #1e293b;\n  --gray-900: #0f172a;\n  --radius: 0.5rem;\n  --shadow:\n    0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  --transition: 200ms ease-out;\n}\n\n/* Reset and Base Styles */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family:\n    -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu,\n    Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  line-height: 1.5;\n  min-height: 100vh;\n}\n\n#root {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.hidden {\n  display: none !important;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-weight: 600;\n  line-height: 1.25;\n}\n\nimg {\n  max-width: 100%;\n  height: auto;\n}\n\nbutton {\n  cursor: pointer;\n  font-family: inherit;\n}\n\n/* Layout */\n.container {\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 1rem;\n}\n\nmain.container {\n  flex: 1;\n  padding-top: 1.5rem;\n  padding-bottom: 2rem;\n}\n\nsection {\n  margin-bottom: 1.5rem;\n}\n\n/* Header */\nheader {\n  background-color: var(--primary-color);\n  color: white;\n  padding: 1rem 0;\n  box-shadow: var(--shadow);\n}\n\n.header-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\nheader h1 {\n  font-size: 1.5rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n/* Navigation Menu with CSS-only hamburger */\n.nav-menu {\n  position: relative;\n}\n\n/* Hamburger menu checkbox (hidden but functional) */\n.menu-toggle {\n  display: none;\n}\n\n.menu-toggle-label {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n}\n\n/* Hamburger icon using spans */\n.hamburger-icon,\n.hamburger-icon::before,\n.hamburger-icon::after {\n  display: block;\n  background-color: white;\n  height: 3px;\n  width: 25px;\n  transition: all 0.3s ease-in-out;\n  position: relative;\n}\n\n.hamburger-icon::before,\n.hamburger-icon::after {\n  content: '';\n  position: absolute;\n}\n\n.hamburger-icon::before {\n  top: -8px;\n}\n\n.hamburger-icon::after {\n  top: 8px;\n}\n\n/* Menu items styling */\n.menu-items {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background-color: var(--primary-color);\n  width: 200px;\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.3s ease-in-out;\n  z-index: 1;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.menu-items li {\n  margin: 0;\n}\n\n.menu-items a {\n  color: white;\n  text-decoration: none;\n  font-weight: 500;\n  padding: 0.75rem 1rem;\n  display: block;\n  transition: background-color var(--transition);\n}\n\n.menu-items a:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.menu-items a.active {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n/* Toggle menu visibility when checkbox is checked */\n.menu-toggle:checked ~ .menu-items {\n  max-height: 300px; /* Large enough to contain all items */\n}\n\n/* Change hamburger to X when menu is open */\n.menu-toggle:checked ~ .menu-toggle-label .hamburger-icon {\n  background: transparent;\n}\n\n.menu-toggle:checked ~ .menu-toggle-label .hamburger-icon::before {\n  transform: rotate(45deg);\n  top: 0;\n}\n\n.menu-toggle:checked ~ .menu-toggle-label .hamburger-icon::after {\n  transform: rotate(-45deg);\n  top: 0;\n}\n\n/* Desktop styles */\n@media (min-width: 768px) {\n  .menu-toggle-label {\n    display: none;\n  }\n\n  .menu-items {\n    position: static;\n    flex-direction: row;\n    max-height: none;\n    width: auto;\n    background: none;\n    box-shadow: none;\n    overflow: visible;\n  }\n\n  .menu-items li {\n    margin: 0 0 0 1rem;\n  }\n\n  .menu-items a {\n    padding: 0.5rem 1rem;\n  }\n}\n\n/* Footer */\nfooter {\n  background-color: var(--gray-800);\n  color: var(--gray-300);\n  padding: 1.5rem 0;\n  margin-top: auto;\n  font-size: 0.875rem;\n}\n\nfooter p {\n  margin-bottom: 0.5rem;\n}\n\nfooter a {\n  text-decoration: none;\n  color: var(--gray-300);\n}\n\n/* Cards */\n.card {\n  background-color: var(--card-color);\n  border-radius: var(--radius);\n  box-shadow: var(--shadow);\n  padding: 1.5rem;\n  height: 100%;\n}\n\n/* Search Form */\nform {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-top: 1rem;\n}\n\n.input-wrapper {\n  position: relative;\n  flex: 1;\n}\n\ninput {\n  width: 100%;\n  padding: 0.75rem 1rem;\n  border: 1px solid var(--gray-300);\n  border-radius: var(--radius);\n  font-size: 1rem;\n  transition: border-color var(--transition);\n}\n\ninput:focus {\n  outline: none;\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);\n}\n\n.clear-button {\n  position: absolute;\n  right: 0.75rem;\n  top: 50%;\n  transform: translateY(-50%);\n  border: none;\n  background: none;\n  color: var(--gray-400);\n  font-size: 1.25rem;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.clear-button:hover {\n  color: var(--danger-color);\n}\n\n.btn-primary {\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: var(--radius);\n  font-weight: 600;\n  transition: background-color var(--transition);\n}\n\n.btn-primary:hover:not(:disabled) {\n  background-color: var(--primary-dark);\n}\n\n.btn-primary:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.btn-secondary {\n  background-color: var(--gray-200);\n  color: var(--gray-700);\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: var(--radius);\n  font-weight: 500;\n  font-size: 0.875rem;\n  transition: background-color var(--transition);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.btn-secondary:hover:not(:disabled) {\n  background-color: var(--gray-300);\n}\n\n.btn-secondary:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n/* WeatherModel Section */\n.weather-header {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-bottom: 1.5rem;\n}\n\n#cityName {\n  font-size: 1.5rem;\n  margin-bottom: 0.25rem;\n}\n\n#currentDateTime {\n  color: var(--text-light);\n  font-size: 0.875rem;\n}\n\n.last-updated {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: var(--text-light);\n  font-size: 0.875rem;\n}\n\n.weather-content {\n  margin-top: 1rem;\n}\n\n.current-weather {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.weather-primary {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.weather-icon {\n  flex-shrink: 0;\n}\n\n.weather-icon img {\n  width: 80px;\n  height: 80px;\n}\n\n.temperature {\n  font-size: 2.5rem;\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n}\n\n.weather-description {\n  color: var(--text-light);\n  text-transform: capitalize;\n}\n\n.weather-details {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 1rem;\n}\n\n.weather-detail {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background-color: var(--gray-50);\n  border-radius: var(--radius);\n}\n\n.weather-detail i {\n  font-size: 1.25rem;\n  color: var(--primary-color);\n}\n\n.weather-detail p:first-of-type {\n  font-size: 0.75rem;\n  color: var(--text-light);\n  margin-bottom: 0.25rem;\n}\n\n.weather-detail p:last-of-type {\n  font-weight: 600;\n}\n\n/* Map Section */\n.section-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n}\n\n.section-header h2 {\n  font-size: 1.25rem;\n}\n\n.section-header i {\n  color: var(--primary-color);\n}\n\n.map-container {\n  height: 250px;\n  border-radius: var(--radius);\n  overflow: hidden;\n  background-color: var(--gray-100);\n  position: relative;\n}\n\n.map-container img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n/* State Containers (Empty, Loading, Error) */\n.state-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 2rem 1rem;\n  min-height: 200px;\n  gap: 1rem;\n}\n\n.state-container .state-icon {\n  font-size: 3rem;\n  color: var(--primary-color);\n  margin-bottom: 0.5rem;\n}\n\n.state-container .state-icon.error {\n  color: var(--danger-color);\n}\n\n.state-container h3 {\n  margin-bottom: 0.5rem;\n}\n\n.state-container p {\n  color: var(--text-light);\n  max-width: 300px;\n  margin: 0 auto;\n}\n\n.spinner {\n  display: inline-block;\n  width: 2.5rem;\n  height: 2.5rem;\n  border: 0.25rem solid var(--gray-200);\n  border-radius: 50%;\n  border-top-color: var(--primary-color);\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* HistoryModel Section */\n.history-container {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.history-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  background-color: var(--gray-50);\n  border-radius: var(--radius);\n  transition: background-color var(--transition);\n  cursor: pointer;\n}\n\n.history-item:hover {\n  background-color: var(--gray-100);\n}\n\n.history-item-city {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.city-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2.5rem;\n  height: 2.5rem;\n  background-color: var(--primary-color);\n  color: white;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.city-info h3 {\n  font-size: 1rem;\n  margin-bottom: 0.25rem;\n}\n\n.city-info p {\n  font-size: 0.75rem;\n  color: var(--gray-500);\n}\n\n.history-item-weather {\n  text-align: right;\n}\n\n.history-item-weather p:first-of-type {\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n}\n\n.history-item-weather p:last-of-type {\n  font-size: 0.75rem;\n  color: var(--gray-500);\n}\n\n.history-actions {\n  display: flex;\n  justify-content: flex-end;\n}\n\n/* Desktop layout container */\n.desktop-container {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.main-content {\n  width: 100%;\n}\n\n.sidebar {\n  width: 100%;\n}\n\n/* Page explanation box */\n.page-explanation {\n  background-color: #edf2f7;\n  border-left: 4px solid #2b6cb0;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n  border-radius: 0.25rem;\n}\n\n/* Utility Classes */\n.hidden {\n  display: none !important;\n}\n\n.sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n/* Media Queries */\n@media (min-width: 640px) {\n  form {\n    flex-direction: row;\n  }\n\n  header h1 {\n    font-size: 1.75rem;\n  }\n\n  .weather-header {\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .map-container {\n    height: 300px;\n  }\n}\n\n@media (min-width: 768px) {\n  .current-weather {\n    flex-direction: row;\n  }\n\n  .weather-primary {\n    flex: 1;\n  }\n\n  .weather-details {\n    flex: 2;\n  }\n\n  .map-container {\n    height: 400px;\n  }\n}\n\n@media (min-width: 1024px) {\n  main.container {\n    padding-top: 2rem;\n    padding-bottom: 3rem;\n  }\n\n  .desktop-container {\n    flex-direction: row;\n  }\n\n  .main-content {\n    flex: 2;\n  }\n\n  .sidebar {\n    flex: 1;\n  }\n\n  section {\n    margin-bottom: 2.5rem;\n  }\n\n  .card {\n    transition: transform var(--transition);\n  }\n\n  .card:hover {\n    transform: translateY(-2px);\n  }\n}\n",""]);const s=o}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var i=n[r]={id:r,exports:{}};return e[r](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var r=t(72),a=t.n(r),i=t(825),o=t.n(i),s=t(659),c=t.n(s),d=t(56),l=t.n(d),m=t(540),h=t.n(m),p=t(113),u=t.n(p),y=t(919),g={};g.styleTagTransform=u(),g.setAttributes=l(),g.insert=c().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=h(),a()(y.A,g),y.A&&y.A.locals&&y.A.locals;const f="fe7d68f7601a014913c3e92cb08ee83e";class v{constructor(){this.currentWeather=null}async fetchCityByName(e){const n=`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=${f}`,t=await fetch(n);if(!t.ok)throw new Error("Did not get city by name");const r=await t.json();if(!r)throw new Error("City coordinates are not available");return r[0]}async fetchWeatherByCoordinates(e){const n=`https://api.openweathermap.org/data/2.5/weather?lat=${e.lat}&lon=${e.lon}&units=metric&appid=${f}`,t=await fetch(n);if(!t.ok)throw new Error("Error getting city by coordinates");const r=await t.json();if(!r)throw new Error("No city data found");return r}async getWeather(e){try{const n=await this.fetchCityByName(e),t=`${n.name}, ${n.country}`,r=await this.fetchWeatherByCoordinates(n);return r.cityName=t,this.currentWeather=r,r}catch(e){throw console.error("Very big error master boss! It says: ",e),e}}}const b="searchHistory";class w{constructor(){this.history=this.loadHistory()}loadHistory(){try{const e=localStorage.getItem(b);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load history",e),[]}}persistHistory(){try{localStorage.setItem(b,JSON.stringify(this.history))}catch(e){console.error("Failed to save history",e)}}saveToHistory(e){e&&(this.history=this.history.filter(n=>n!==e),this.history.unshift(e),this.history.length>10&&this.history.pop(),this.persistHistory())}getHistory(){return[...this.history]}clearHistory(){this.history=[],this.persistHistory()}}class x{async fetchCurrentLocation(){const e=await fetch("https://get.geojs.io/v1/ip/geo.json");if(!e.ok)throw new Error("Location info not available");const n=await e.json();if(!n)throw new Error("Location info is empty");return n.city}}class E{constructor(){this.rootElement=null,this.searchInput=null,this.searchButton=null,this.clearButton=null,this.clearHistoryButton=null}initialize(e){this.rootElement=e,this.drawLayout(),this.cacheElements()}cacheElements(){this.searchInput=document.querySelector("#cityInput"),this.searchButton=document.querySelector("#searchButton"),this.clearButton=document.querySelector("#clearButton"),this.clearHistoryButton=document.querySelector(".history-actions button")}drawLayout(){this.drawHeader(this.rootElement),this.drawMain(this.rootElement),this.drawFooter(this.rootElement)}drawHeader(e){const n=this.createHeader();e.appendChild(n)}drawMain(e){const n=this.createMain();e.appendChild(n)}drawFooter(e){const n=this.createFooter();e.appendChild(n)}drawWeather(e){const n=document.querySelector("#weatherData"),t=document.querySelector(".weather-section .state-container");n.innerHTML="";const r=this.createWeatherHeaderContainer(e),a=this.createWeatherContent(e);n.append(r,a),t.classList.add("hidden"),n.classList.remove("hidden")}drawHistory(e){const n=document.querySelector(".history-list"),t=n.querySelector(".state-container");n.querySelectorAll(".history-item").forEach(e=>{e.remove()});for(const t of e){const e=this.createHistoryItem(t);n.prepend(e)}t.classList.add("hidden"),this.clearHistoryButton.disabled=!1}drawMap(e){const n=document.querySelector(".map-section .map-container");n.querySelector(".state-container").classList.add("hidden");const t=document.createElement("div");t.id="map",n.querySelector("#map")&&n.removeChild(n.querySelector("#map"));const r=document.createElement("img");r.src=e,r.alt="City map img",t.appendChild(r),n.appendChild(t)}clearVisibleHistory(){const e=document.querySelector(".history-list"),n=e.querySelector(".state-container");e.querySelectorAll(".history-item").forEach(e=>{e.remove()}),n.classList.remove("hidden"),this.clearHistoryButton.disabled=!0}enableSearchButton(e){this.searchButton&&(this.searchButton.disabled=!e)}clearSearchInput(){this.searchInput&&(this.searchInput.value="",this.searchButton.disabled=!0,this.searchInput.blur())}getSearchInputValue(){return this.searchInput?this.searchInput.value.trim():""}showError(e){const n=document.querySelector("#weatherData"),t=document.createElement("div");t.classList.add("error-message"),t.innerText=`${e}`,n.innerHTML="",n.append(t),n.classList.remove("hidden")}showLoading(){const e=document.querySelector("#weatherData"),n=document.createElement("div");n.classList.add("loading-message"),n.innerText="Loading weather data...",e.innerHTML="",e.append(n),e.classList.remove("hidden")}bindSearchInput(e){this.searchInput&&this.searchInput.addEventListener("input",e)}bindClearInput(e){this.clearButton&&this.clearButton.addEventListener("click",e)}bindSearchButton(e){this.searchButton&&this.searchButton.addEventListener("click",e)}bindSearchForm(e){const n=document.querySelector("#cityForm");n&&n.addEventListener("submit",n=>{n.preventDefault(),e()})}bindClearHistory(e){this.clearHistoryButton&&this.clearHistoryButton.addEventListener("click",e)}bindHistoryItemClick(e){const n=document.querySelector(".history-list");n&&n.addEventListener("click",n=>{const t=n.target.closest(".history-item");if(t){const n=t.querySelector("h3").innerText;e(n)}})}createHeader(){const e=document.createElement("header"),n=document.createElement("div");n.classList.add("container","header-container");const t=document.createElement("h1"),r=document.createElement("i");r.classList.add("fas","fa-cloud-sun");const a=document.createElement("span");return a.innerText="Weather Forecast",t.append(r,a),n.appendChild(t),e.appendChild(n),e}createMain(){const e=document.createElement("main");e.classList.add("container");const n=this.createSearchSection(),t=this.createMainInfoSection();return e.append(n,t),e}createSearchSection(){const e=document.createElement("section");e.classList.add("search-section");const n=document.createElement("div");n.classList.add("card"),e.appendChild(n);const t=document.createElement("h2");t.innerText="Search for a city";const r=this.createSearchForm();return n.append(t,r),e}createSearchForm(){const e=document.createElement("form");e.id="cityForm";const n=document.createElement("div");n.classList.add("input-wrapper");const t=this.createSearchInput(),r=this.createClearInputButton();n.append(t,r);const a=this.createSearchButton();return e.append(n,a),e}createSearchInput(){const e=document.createElement("input");return e.type="text",e.id="cityInput",e.placeholder="Enter city name",e.setAttribute("aria-label","City name"),e}createClearInputButton(){const e=document.createElement("button");e.id="clearButton",e.type="button",e.classList.add("clear-button"),e.setAttribute("aria-label","Clear input");const n=document.createElement("i");return n.classList.add("fas","fa-times-circle"),e.appendChild(n),e}createSearchButton(){const e=document.createElement("button");return e.id="searchButton",e.type="submit",e.classList.add("btn-primary"),e.disabled=!0,e.innerText="Search",e}createMainInfoSection(){const e=document.createElement("div");e.classList.add("desktop-container");const n=document.createElement("div");n.classList.add("main-content");const t=this.createWeatherSection(),r=this.createMapSection();n.append(t,r);const a=this.createSidebar();return e.append(n,a),e}createWeatherSection(){const e=document.createElement("section");e.classList.add("weather-section");const n=document.createElement("div");n.classList.add("card");const t=this.createWeatherEmptyCard(),r=this.createWeatherDataCard();return n.append(t,r),e.appendChild(n),e}createWeatherEmptyCard(){const e=document.createElement("div");e.classList.add("state-container");const n=document.createElement("div");n.classList.add("state-icon");const t=document.createElement("i");t.classList.add("fas","fa-cloud-sun"),n.appendChild(t);const r=document.createElement("h3");r.innerText="No weather data to display";const a=document.createElement("p");return a.innerText="Search for a city to see the current weather",e.append(n,r,a),e}createWeatherDataCard(){const e=document.createElement("div");return e.id="weatherData",e.classList.add("hidden"),e}createMapSection(){const e=document.createElement("section");e.classList.add("map-section");const n=document.createElement("div");n.classList.add("card");const t=this.createMapSectionHeader(),r=document.createElement("div");r.classList.add("map-container");const a=this.createEmptyMapCard();return r.appendChild(a),n.append(t,r),e.appendChild(n),e}createMapSectionHeader(){const e=document.createElement("div");e.classList.add("section-header");const n=document.createElement("h2"),t=document.createElement("i");t.classList.add("fas","fa-map-marker-alt");const r=document.createElement("span");return r.innerText=" Location Map ",n.append(t,r),e.appendChild(n),e}createEmptyMapCard(){const e=document.createElement("div");e.classList.add("state-container");const n=document.createElement("i");n.classList.add("fas","fa-map");const t=document.createElement("p");return t.innerText="Search for a city to display its map",e.append(n,t),e}createSidebar(){const e=document.createElement("div");e.classList.add("sidebar");const n=this.createHistorySection();return e.appendChild(n),e}createHistorySection(){const e=document.createElement("section");e.classList.add("history-section");const n=this.createHistoryCard();return e.appendChild(n),e}createHistoryCard(){const e=document.createElement("div");e.classList.add("card");const n=this.createHistorySectionHeader(),t=document.createElement("div");t.classList.add("history-container");const r=this.createHistoryList(),a=document.createElement("div");a.classList.add("history-actions");const i=this.createClearHistoryButton();return a.appendChild(i),t.append(r,a),e.append(n,t),e}createHistorySectionHeader(){const e=document.createElement("div");e.classList.add("section-header");const n=document.createElement("h2"),t=document.createElement("i");t.classList.add("fas","fa-history");const r=document.createElement("span");return r.innerText=" Search History ",n.append(t,r),e.appendChild(n),e}createHistoryList(){const e=document.createElement("div");e.classList.add("history-list");const n=this.createEmptyHistory();return e.appendChild(n),e}createEmptyHistory(){const e=document.createElement("div");e.classList.add("state-container");const n=document.createElement("i");n.classList.add("fas","fa-search");const t=document.createElement("p");return t.innerText="Your search history will appear here",e.append(n,t),e}createClearHistoryButton(){const e=document.createElement("button");e.classList.add("btn-secondary"),e.disabled=!0;const n=document.createElement("i");n.classList.add("fas","fa-trash-alt");const t=document.createElement("span");return t.innerText=" Clear History ",e.append(n,t),e}createFooter(){const e=document.createElement("footer"),n=document.createElement("div");n.classList.add("container");const t=document.createElement("p");t.innerText=`Weather Forecast StanSky App © ${(new Date).getFullYear()}`;const r=document.createElement("p");r.innerText="Weather data provided by ";const a=document.createElement("a");return a.href="https://openweathermap.org/",a.target="_blank",a.innerText="OpenWeatherMap",r.append(a),n.append(t,r),e.appendChild(n),e}createWeatherHeaderContainer(e){const n=document.createElement("div");n.classList.add("weather-header");const t=this.createWeatherHeader(e),r=this.createLastUpdated(e.searchTime);return n.append(t,r),n}createWeatherContent(e){const n=document.createElement("div");n.classList.add("weather-content");const t=document.createElement("div");t.classList.add("current-weather");const r=document.createElement("div");r.classList.add("weather-primary");const a=this.createWeatherIconContainer(e.weather[0].icon),i=document.createElement("div");i.classList.add("temperature-container");const o=this.createWeatherTemperature(e.main.temp),s=this.createWeatherDescription(e.weather[0].description);i.append(o,s),r.append(a,i);const c=document.createElement("div");c.classList.add("weather-details");const d=this.createWindDetails(e.wind.speed),l=this.createHumidityDetails(e.main.humidity),m=this.createPressureDetails(e.main.pressure);return c.append(d,l,m),t.append(r,c),n.appendChild(t),n}createWeatherIconContainer(e){const n=document.createElement("div");n.classList.add("weather-icon");const t=document.createElement("img");return t.src=`https://openweathermap.org/img/wn/${e}@2x.png`,t.alt="Weather icon",n.appendChild(t),n}createWeatherTemperature(e){const n=document.createElement("div");return n.classList.add("temperature"),n.innerText=`${Math.round(e)}°C`,n}createWeatherDescription(e){const n=document.createElement("div");return n.classList.add("weather-description"),n.innerText=e,n}createWindDetails(e){const n=document.createElement("div");n.classList.add("weather-detail");const t=document.createElement("i");t.classList.add("fas","fa-wind");const r=document.createElement("div");r.classList.add("wind-details");const a=document.createElement("p");a.innerText="Wind";const i=document.createElement("p");return i.classList.add("wind-value"),i.innerText=`${e} m/s`,r.append(a,i),n.append(t,r),n}createHumidityDetails(e){const n=document.createElement("div");n.classList.add("weather-detail");const t=document.createElement("i");t.classList.add("fas","fa-tint");const r=document.createElement("div");r.classList.add("humidity-details");const a=document.createElement("p");a.innerText="Humidity";const i=document.createElement("p");return i.classList.add("humidity-value"),i.innerText=`${e}%`,r.append(a,i),n.append(t,r),n}createPressureDetails(e){const n=document.createElement("div");n.classList.add("weather-detail");const t=document.createElement("i");t.classList.add("fas","fa-compress-alt");const r=document.createElement("div");r.classList.add("pressure-details");const a=document.createElement("p");a.innerText="Pressure";const i=document.createElement("p");return i.classList.add("pressure-value"),i.innerText=`${e} hPa`,r.append(a,i),n.append(t,r),n}createWeatherHeader(e){const n=document.createElement("div"),t=document.createElement("h2");t.id="cityName",t.innerText=e.cityName;const r=document.createElement("p");return r.id="currentDateTime",r.innerText=e.searchDate,n.append(t,r),n}createLastUpdated(e){const n=document.createElement("div");n.classList.add("last-updated");const t=document.createElement("i");t.classList.add("fas","fa-history");const r=document.createElement("span");return r.id="lastUpdated",r.innerText=e,n.append(t,r),n}createHistoryItem(e){const n=document.createElement("div");n.classList.add("history-item");const t=document.createElement("div");t.classList.add("history-item-city");const r=document.createElement("div");r.classList.add("city-icon");const a=document.createElement("i");a.classList.add("fas","fa-map-marker-alt"),r.appendChild(a);const i=document.createElement("div");i.classList.add("city-info");const o=document.createElement("h3");return o.innerText=e,i.append(o),t.append(r,i),n.append(t),n}}class L{constructor(){this.weatherModel=new v,this.historyModel=new w,this.locationModel=new x,this.view=new E}initialize(e){this.view.initialize(e),this.bindEvents(),this.loadInitialWeather()}bindEvents(){this.view.bindSearchInput(()=>{const e=this.view.getSearchInputValue();this.view.enableSearchButton(e.length>0)}),this.view.bindClearInput(()=>{this.view.clearSearchInput()}),this.view.bindSearchButton(()=>{this.handleSearch()}),this.view.bindSearchForm(()=>{this.handleSearch()}),this.view.bindClearHistory(()=>{this.handleClearHistory()}),this.view.bindHistoryItemClick(e=>{this.handleHistoryItemClick(e)})}async loadInitialWeather(){try{this.view.showLoading();const e=await this.locationModel.fetchCurrentLocation(),n=await this.weatherModel.getWeather(e);this.displayWeather(n)}catch(e){console.error("Failed to get location weather",e),this.view.showError("Failed to load weather for your location")}}async handleSearch(){const e=this.view.getSearchInputValue();if(e)try{this.view.showLoading();const n=await this.weatherModel.getWeather(e);this.historyModel.saveToHistory(e),this.displayWeather(n),this.view.clearSearchInput()}catch(n){console.error("Failed to search weather",n),this.view.showError(`Failed to get weather for "${e}"`)}}displayWeather(e){var n;e.searchTime=function(e,n=!1){let t=n?e.getUTCHours():e.getHours(),r=n?e.getUTCMinutes():e.getMinutes();return t=t<10?"0"+t:t,r=r<10?"0"+r:r,`${t}:${r}`}(new Date),e.searchDate=(n=new Date,new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).format(n)),this.view.drawWeather(e),this.view.drawHistory(this.historyModel.getHistory()),this.view.drawMap(`https://maps.googleapis.com/maps/api/staticmap?zoom=12&size=600x400&key=AIzaSyBLuDcz3zbPQZX1mbeMRh0yGAry4wHVQVc&center=${e.cityName}`)}handleClearHistory(){this.historyModel.clearHistory(),this.view.clearVisibleHistory()}handleHistoryItemClick(e){this.view.searchInput.value=e,this.view.enableSearchButton(!0),this.handleSearch()}}window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("weatherApp");(new L).initialize(e)})})();